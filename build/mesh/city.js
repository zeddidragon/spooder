// Generated by CoffeeScript 2.4.1
var makeCity, rgb;

import random from '../math/random.js';

rgb = function() {
  return random() * 0.7 + 0.3;
};

makeCity = function(scene, w, h) {
  var block, building, city, color, height, i, j, k, l, ref, ref1, spacing;
  block = 12;
  spacing = 1.65;
  city = BABYLON.MeshBuilder.CreatePlane('city', {
    width: (w + 1) * block * spacing,
    height: (h + 1) * block * spacing
  }, scene);
  city.rotation.x = Math.PI * .5;
  for (j = k = 0, ref = h; (0 <= ref ? k < ref : k > ref); j = 0 <= ref ? ++k : --k) {
    for (i = l = 0, ref1 = w; (0 <= ref1 ? l < ref1 : l > ref1); i = 0 <= ref1 ? ++l : --l) {
      if (random() > 0.8) {
        continue;
      }
      if (i >= Math.floor(w * 0.5 - 0.1) && i <= Math.ceil(w * 0.5)) {
        continue;
      }
      if (j >= Math.floor(h * 0.5 - 0.1) && j <= Math.ceil(h * 0.5)) {
        continue;
      }
      height = Math.log10(random() * 100) + random() + 1;
      if (random() > 0.94) {
        height *= 2;
      }
      color = new BABYLON.Color4(rgb(), rgb(), rgb());
      building = BABYLON.MeshBuilder.CreateBox(`block${i},${j}`, {
        width: block,
        depth: block,
        height: height * block,
        faceColors: [color, color, color, color, color, color]
      }, scene);
      building.position.x = (i + .5 - w * .5) * block * spacing;
      building.position.z = (j + .5 - h * .5) * block * spacing;
      building.position.y = height * .5 * block;
    }
  }
  return city;
};

export default makeCity;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2l0eS5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsic3JjL21lc2gvY2l0eS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsUUFBQSxFQUFBOztBQUFBLE9BQU8sTUFBUCxNQUFBOztBQUVBLEdBQUEsR0FBTSxRQUFBLENBQUEsQ0FBQTtTQUNKLE1BQUEsQ0FBQSxDQUFBLEdBQVcsR0FBWCxHQUFpQjtBQURiOztBQUdOLFFBQUEsR0FBVyxRQUFBLENBQUMsS0FBRCxFQUFRLENBQVIsRUFBVyxDQUFYLENBQUE7QUFDVCxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQSxLQUFBLEdBQVE7RUFDUixPQUFBLEdBQVU7RUFFVixJQUFBLEdBQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxXQUFwQixDQUFnQyxNQUFoQyxFQUNMO0lBQUEsS0FBQSxFQUFPLENBQUMsQ0FBQSxHQUFJLENBQUwsQ0FBQSxHQUFVLEtBQVYsR0FBa0IsT0FBekI7SUFDQSxNQUFBLEVBQVEsQ0FBQyxDQUFBLEdBQUksQ0FBTCxDQUFBLEdBQVUsS0FBVixHQUFrQjtFQUQxQixDQURLLEVBR0wsS0FISztFQUlQLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBZCxHQUFrQixJQUFJLENBQUMsRUFBTCxHQUFVO0VBRTVCLEtBQVMsNEVBQVQ7SUFDRSxLQUFTLGlGQUFUO01BQ0UsSUFBWSxNQUFBLENBQUEsQ0FBQSxHQUFXLEdBQXZCO0FBQUEsaUJBQUE7O01BQ0EsSUFBWSxDQUFBLElBQUssSUFBSSxDQUFDLEtBQUwsQ0FBVyxDQUFBLEdBQUksR0FBSixHQUFVLEdBQXJCLENBQUwsSUFBbUMsQ0FBQSxJQUFLLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQSxHQUFJLEdBQWQsQ0FBcEQ7QUFBQSxpQkFBQTs7TUFDQSxJQUFZLENBQUEsSUFBSyxJQUFJLENBQUMsS0FBTCxDQUFXLENBQUEsR0FBSSxHQUFKLEdBQVUsR0FBckIsQ0FBTCxJQUFtQyxDQUFBLElBQUssSUFBSSxDQUFDLElBQUwsQ0FBVSxDQUFBLEdBQUksR0FBZCxDQUFwRDtBQUFBLGlCQUFBOztNQUNBLE1BQUEsR0FBUyxJQUFJLENBQUMsS0FBTCxDQUFXLE1BQUEsQ0FBQSxDQUFBLEdBQVcsR0FBdEIsQ0FBQSxHQUE2QixNQUFBLENBQUEsQ0FBN0IsR0FBd0M7TUFDakQsSUFBZSxNQUFBLENBQUEsQ0FBQSxHQUFXLElBQTFCO1FBQUEsTUFBQSxJQUFVLEVBQVY7O01BQ0EsS0FBQSxHQUFRLElBQUksT0FBTyxDQUFDLE1BQVosQ0FBbUIsR0FBQSxDQUFBLENBQW5CLEVBQTBCLEdBQUEsQ0FBQSxDQUExQixFQUFpQyxHQUFBLENBQUEsQ0FBakM7TUFDUixRQUFBLEdBQVcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxTQUFwQixDQUE4QixDQUFBLEtBQUEsQ0FBQSxDQUFRLENBQVIsQ0FBVSxDQUFWLENBQUEsQ0FBYSxDQUFiLENBQUEsQ0FBOUIsRUFDVDtRQUFBLEtBQUEsRUFBTyxLQUFQO1FBQ0EsS0FBQSxFQUFPLEtBRFA7UUFFQSxNQUFBLEVBQVEsTUFBQSxHQUFTLEtBRmpCO1FBR0EsVUFBQSxFQUFZLENBQUMsS0FBRCxFQUFRLEtBQVIsRUFBZSxLQUFmLEVBQXNCLEtBQXRCLEVBQTZCLEtBQTdCLEVBQW9DLEtBQXBDO01BSFosQ0FEUyxFQUtULEtBTFM7TUFNWCxRQUFRLENBQUMsUUFBUSxDQUFDLENBQWxCLEdBQXNCLENBQUMsQ0FBQSxHQUFJLEVBQUosR0FBUyxDQUFBLEdBQUksRUFBZCxDQUFBLEdBQW9CLEtBQXBCLEdBQTRCO01BQ2xELFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBbEIsR0FBc0IsQ0FBQyxDQUFBLEdBQUksRUFBSixHQUFTLENBQUEsR0FBSSxFQUFkLENBQUEsR0FBb0IsS0FBcEIsR0FBNEI7TUFDbEQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFsQixHQUFzQixNQUFBLEdBQVMsRUFBVCxHQUFjO0lBZnRDO0VBREY7U0FrQkE7QUE1QlM7O0FBOEJYLE9BQUEsUUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCByYW5kb20gZnJvbSAnLi4vbWF0aC9yYW5kb20uanMnXG5cbnJnYiA9IC0+XG4gIHJhbmRvbSgpICogMC43ICsgMC4zXG5cbm1ha2VDaXR5ID0gKHNjZW5lLCB3LCBoKSAtPlxuICBibG9jayA9IDEyXG4gIHNwYWNpbmcgPSAxLjY1XG5cbiAgY2l0eSA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlUGxhbmUgJ2NpdHknLFxuICAgIHdpZHRoOiAodyArIDEpICogYmxvY2sgKiBzcGFjaW5nXG4gICAgaGVpZ2h0OiAoaCArIDEpICogYmxvY2sgKiBzcGFjaW5nXG4gICAgc2NlbmVcbiAgY2l0eS5yb3RhdGlvbi54ID0gTWF0aC5QSSAqIC41XG5cbiAgZm9yIGogaW4gWzAuLi5oXVxuICAgIGZvciBpIGluIFswLi4ud11cbiAgICAgIGNvbnRpbnVlIGlmIHJhbmRvbSgpID4gMC44XG4gICAgICBjb250aW51ZSBpZiBpID49IE1hdGguZmxvb3IodyAqIDAuNSAtIDAuMSkgYW5kIGkgPD0gTWF0aC5jZWlsKHcgKiAwLjUpXG4gICAgICBjb250aW51ZSBpZiBqID49IE1hdGguZmxvb3IoaCAqIDAuNSAtIDAuMSkgYW5kIGogPD0gTWF0aC5jZWlsKGggKiAwLjUpXG4gICAgICBoZWlnaHQgPSBNYXRoLmxvZzEwKHJhbmRvbSgpICogMTAwKSArIHJhbmRvbSgpICsgMVxuICAgICAgaGVpZ2h0ICo9IDIgaWYgcmFuZG9tKCkgPiAwLjk0XG4gICAgICBjb2xvciA9IG5ldyBCQUJZTE9OLkNvbG9yNCByZ2IoKSwgcmdiKCksIHJnYigpXG4gICAgICBidWlsZGluZyA9IEJBQllMT04uTWVzaEJ1aWxkZXIuQ3JlYXRlQm94IFwiYmxvY2sje2l9LCN7an1cIixcbiAgICAgICAgd2lkdGg6IGJsb2NrXG4gICAgICAgIGRlcHRoOiBibG9ja1xuICAgICAgICBoZWlnaHQ6IGhlaWdodCAqIGJsb2NrXG4gICAgICAgIGZhY2VDb2xvcnM6IFtjb2xvciwgY29sb3IsIGNvbG9yLCBjb2xvciwgY29sb3IsIGNvbG9yXVxuICAgICAgICBzY2VuZVxuICAgICAgYnVpbGRpbmcucG9zaXRpb24ueCA9IChpICsgLjUgLSB3ICogLjUpICogYmxvY2sgKiBzcGFjaW5nXG4gICAgICBidWlsZGluZy5wb3NpdGlvbi56ID0gKGogKyAuNSAtIGggKiAuNSkgKiBibG9jayAqIHNwYWNpbmdcbiAgICAgIGJ1aWxkaW5nLnBvc2l0aW9uLnkgPSBoZWlnaHQgKiAuNSAqIGJsb2NrXG5cbiAgY2l0eVxuXG5leHBvcnQgZGVmYXVsdCBtYWtlQ2l0eVxuIl19
//# sourceURL=/Users/zeddy/git/spooder-boat/src/mesh/city.coffee