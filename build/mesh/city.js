// Generated by CoffeeScript 2.4.1
var makeCity, rgb;

import random from '../math/random.js';

rgb = function() {
  return random() * 0.7 + 0.3;
};

makeCity = function(scene, w, h) {
  var block, building, city, color, height, i, j, k, l, ref, ref1, spacing;
  block = 12;
  spacing = 1.65;
  city = BABYLON.MeshBuilder.CreatePlane('city', {
    width: w * block * spacing,
    height: h * block * spacing
  }, scene);
  city.rotation.x = Math.PI * .5;
  for (j = k = 0, ref = h; (0 <= ref ? k < ref : k > ref); j = 0 <= ref ? ++k : --k) {
    for (i = l = 0, ref1 = w; (0 <= ref1 ? l < ref1 : l > ref1); i = 0 <= ref1 ? ++l : --l) {
      if (random() > 0.8) {
        continue;
      }
      if (i >= Math.floor(w * 0.5) && i <= Math.ceil(w * 0.5)) {
        continue;
      }
      if (j >= Math.floor(h * 0.5) && j <= Math.ceil(h * 0.5)) {
        continue;
      }
      height = Math.log10(random() * 100) + random() + 1;
      if (random() > 0.9) {
        height *= 2;
      }
      color = new BABYLON.Color4(rgb(), rgb(), rgb());
      building = BABYLON.MeshBuilder.CreateBox(`block${i},${j}`, {
        width: block,
        depth: block,
        height: height * block,
        faceColors: [color, color, color, color, color, color]
      }, scene);
      building.position.x = (i + .5 - w * .5) * block * spacing;
      building.position.z = (j + .5 - h * .5) * block * spacing;
      building.position.y = height * .5 * block;
    }
  }
  return city;
};

export default makeCity;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2l0eS5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsic3JjL21lc2gvY2l0eS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsUUFBQSxFQUFBOztBQUFBLE9BQU8sTUFBUCxNQUFBOztBQUVBLEdBQUEsR0FBTSxRQUFBLENBQUEsQ0FBQTtTQUNKLE1BQUEsQ0FBQSxDQUFBLEdBQVcsR0FBWCxHQUFpQjtBQURiOztBQUdOLFFBQUEsR0FBVyxRQUFBLENBQUMsS0FBRCxFQUFRLENBQVIsRUFBVyxDQUFYLENBQUE7QUFDVCxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQSxLQUFBLEdBQVE7RUFDUixPQUFBLEdBQVU7RUFFVixJQUFBLEdBQU8sT0FBTyxDQUFDLFdBQVcsQ0FBQyxXQUFwQixDQUFnQyxNQUFoQyxFQUNMO0lBQUEsS0FBQSxFQUFPLENBQUEsR0FBSSxLQUFKLEdBQVksT0FBbkI7SUFDQSxNQUFBLEVBQVEsQ0FBQSxHQUFJLEtBQUosR0FBWTtFQURwQixDQURLLEVBR0wsS0FISztFQUlQLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBZCxHQUFrQixJQUFJLENBQUMsRUFBTCxHQUFVO0VBRTVCLEtBQVMsNEVBQVQ7SUFDRSxLQUFTLGlGQUFUO01BQ0UsSUFBWSxNQUFBLENBQUEsQ0FBQSxHQUFXLEdBQXZCO0FBQUEsaUJBQUE7O01BQ0EsSUFBWSxDQUFBLElBQUssSUFBSSxDQUFDLEtBQUwsQ0FBVyxDQUFBLEdBQUksR0FBZixDQUFMLElBQTZCLENBQUEsSUFBSyxJQUFJLENBQUMsSUFBTCxDQUFVLENBQUEsR0FBSSxHQUFkLENBQTlDO0FBQUEsaUJBQUE7O01BQ0EsSUFBWSxDQUFBLElBQUssSUFBSSxDQUFDLEtBQUwsQ0FBVyxDQUFBLEdBQUksR0FBZixDQUFMLElBQTZCLENBQUEsSUFBSyxJQUFJLENBQUMsSUFBTCxDQUFVLENBQUEsR0FBSSxHQUFkLENBQTlDO0FBQUEsaUJBQUE7O01BQ0EsTUFBQSxHQUFTLElBQUksQ0FBQyxLQUFMLENBQVcsTUFBQSxDQUFBLENBQUEsR0FBVyxHQUF0QixDQUFBLEdBQTZCLE1BQUEsQ0FBQSxDQUE3QixHQUF3QztNQUNqRCxJQUFlLE1BQUEsQ0FBQSxDQUFBLEdBQVcsR0FBMUI7UUFBQSxNQUFBLElBQVUsRUFBVjs7TUFDQSxLQUFBLEdBQVEsSUFBSSxPQUFPLENBQUMsTUFBWixDQUFtQixHQUFBLENBQUEsQ0FBbkIsRUFBMEIsR0FBQSxDQUFBLENBQTFCLEVBQWlDLEdBQUEsQ0FBQSxDQUFqQztNQUNSLFFBQUEsR0FBVyxPQUFPLENBQUMsV0FBVyxDQUFDLFNBQXBCLENBQThCLENBQUEsS0FBQSxDQUFBLENBQVEsQ0FBUixDQUFVLENBQVYsQ0FBQSxDQUFhLENBQWIsQ0FBQSxDQUE5QixFQUNUO1FBQUEsS0FBQSxFQUFPLEtBQVA7UUFDQSxLQUFBLEVBQU8sS0FEUDtRQUVBLE1BQUEsRUFBUSxNQUFBLEdBQVMsS0FGakI7UUFHQSxVQUFBLEVBQVksQ0FBQyxLQUFELEVBQVEsS0FBUixFQUFlLEtBQWYsRUFBc0IsS0FBdEIsRUFBNkIsS0FBN0IsRUFBb0MsS0FBcEM7TUFIWixDQURTLEVBS1QsS0FMUztNQU1YLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBbEIsR0FBc0IsQ0FBQyxDQUFBLEdBQUksRUFBSixHQUFTLENBQUEsR0FBSSxFQUFkLENBQUEsR0FBb0IsS0FBcEIsR0FBNEI7TUFDbEQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFsQixHQUFzQixDQUFDLENBQUEsR0FBSSxFQUFKLEdBQVMsQ0FBQSxHQUFJLEVBQWQsQ0FBQSxHQUFvQixLQUFwQixHQUE0QjtNQUNsRCxRQUFRLENBQUMsUUFBUSxDQUFDLENBQWxCLEdBQXNCLE1BQUEsR0FBUyxFQUFULEdBQWM7SUFmdEM7RUFERjtTQWtCQTtBQTVCUzs7QUE4QlgsT0FBQSxRQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJhbmRvbSBmcm9tICcuLi9tYXRoL3JhbmRvbS5qcydcblxucmdiID0gLT5cbiAgcmFuZG9tKCkgKiAwLjcgKyAwLjNcblxubWFrZUNpdHkgPSAoc2NlbmUsIHcsIGgpIC0+XG4gIGJsb2NrID0gMTJcbiAgc3BhY2luZyA9IDEuNjVcblxuICBjaXR5ID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVQbGFuZSAnY2l0eScsXG4gICAgd2lkdGg6IHcgKiBibG9jayAqIHNwYWNpbmdcbiAgICBoZWlnaHQ6IGggKiBibG9jayAqIHNwYWNpbmdcbiAgICBzY2VuZVxuICBjaXR5LnJvdGF0aW9uLnggPSBNYXRoLlBJICogLjVcblxuICBmb3IgaiBpbiBbMC4uLmhdXG4gICAgZm9yIGkgaW4gWzAuLi53XVxuICAgICAgY29udGludWUgaWYgcmFuZG9tKCkgPiAwLjhcbiAgICAgIGNvbnRpbnVlIGlmIGkgPj0gTWF0aC5mbG9vcih3ICogMC41KSBhbmQgaSA8PSBNYXRoLmNlaWwgdyAqIDAuNVxuICAgICAgY29udGludWUgaWYgaiA+PSBNYXRoLmZsb29yKGggKiAwLjUpIGFuZCBqIDw9IE1hdGguY2VpbCBoICogMC41XG4gICAgICBoZWlnaHQgPSBNYXRoLmxvZzEwKHJhbmRvbSgpICogMTAwKSArIHJhbmRvbSgpICsgMVxuICAgICAgaGVpZ2h0ICo9IDIgaWYgcmFuZG9tKCkgPiAwLjlcbiAgICAgIGNvbG9yID0gbmV3IEJBQllMT04uQ29sb3I0IHJnYigpLCByZ2IoKSwgcmdiKClcbiAgICAgIGJ1aWxkaW5nID0gQkFCWUxPTi5NZXNoQnVpbGRlci5DcmVhdGVCb3ggXCJibG9jayN7aX0sI3tqfVwiLFxuICAgICAgICB3aWR0aDogYmxvY2tcbiAgICAgICAgZGVwdGg6IGJsb2NrXG4gICAgICAgIGhlaWdodDogaGVpZ2h0ICogYmxvY2tcbiAgICAgICAgZmFjZUNvbG9yczogW2NvbG9yLCBjb2xvciwgY29sb3IsIGNvbG9yLCBjb2xvciwgY29sb3JdXG4gICAgICAgIHNjZW5lXG4gICAgICBidWlsZGluZy5wb3NpdGlvbi54ID0gKGkgKyAuNSAtIHcgKiAuNSkgKiBibG9jayAqIHNwYWNpbmdcbiAgICAgIGJ1aWxkaW5nLnBvc2l0aW9uLnogPSAoaiArIC41IC0gaCAqIC41KSAqIGJsb2NrICogc3BhY2luZ1xuICAgICAgYnVpbGRpbmcucG9zaXRpb24ueSA9IGhlaWdodCAqIC41ICogYmxvY2tcblxuICBjaXR5XG5cbmV4cG9ydCBkZWZhdWx0IG1ha2VDaXR5XG4iXX0=
//# sourceURL=/Users/zeddy/git/spooder-boat/src/mesh/city.coffee